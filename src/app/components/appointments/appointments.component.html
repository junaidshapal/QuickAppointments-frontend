<div class="p-6 bg-white shadow-lg rounded-lg">
  <div class="flex items-center justify-between mb-4">
    <h2 class="text-xl font-semibold text-gray-700">Appointments</h2>
    <button
      class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition duration-300"
      (click)="openAddAppointment()"
    >
      New Appointment
    </button>
  </div>

  <div class="relative overflow-x-auto shadow-md rounded-lg border border-gray-300">
    <table class="w-full text-sm text-left text-black">
      <thead class="text-sm uppercase bg-blue-200 text-black font-bold">
        <tr>
          <th scope="col" class="px-4 py-3">#</th>
          <th scope="col" class="px-4 py-3">Doctor</th>
          <th scope="col" class="px-4 py-3">Date</th>
          <th scope="col" class="px-4 py-3">Time</th>
          <th scope="col" class="px-4 py-3">Status</th>
          <th scope="col" class="px-4 py-3 text-center">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let appointment of paginatedAppointments; let i = index"
            class="border-b bg-gray-50 hover:bg-gray-100 transition duration-200">
          <td class="px-4 py-3 font-medium text-black">{{ (currentPage - 1) * pageSize + i + 1 }}</td>
          <td class="px-4 py-3 text-black">{{ appointment.doctorId }}</td>
          <td class="px-4 py-3 text-black">{{ appointment.appointmentDate | date: 'yyyy-MM-dd' }}</td>
          <td class="px-4 py-3 text-black">{{ appointment.startTime }} - {{ appointment.endTime }}</td>
          <td class="px-4 py-3 text-black">
            <span [ngClass]="{
              'text-green-600': appointment.status === 'Confirmed',
              'text-yellow-600': appointment.status === 'Pending',
              'text-red-600': appointment.status === 'Canceled',
              'text-blue-600': appointment.status === 'Completed'
            }">
              {{ appointment.status }}
            </span>
          </td>
          <td class="px-4 py-3 text-center">
            <button mat-icon-button color="primary" (click)="viewDetails(appointment)">
              <mat-icon>visibility</mat-icon>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <!-- <div class="relative overflow-x-auto shadow-md rounded-lg border border-gray-300">
    <table class="w-full text-sm text-left text-black">
      <thead class="text-sm uppercase bg-blue-200 text-black font-bold">
        <tr>
          <th scope="col" class="px-4 py-3">#</th>
          <th scope="col" class="px-4 py-3">Doctor</th>
          <th scope="col" class="px-4 py-3">Date</th>
          <th scope="col" class="px-4 py-3">Time</th>
          <th scope="col" class="px-4 py-3">Status</th>
          <th scope="col" class="px-4 py-3 text-center">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let appointment of paginatedAppointments; let i = index"
            class="border-b bg-gray-50 hover:bg-gray-100 transition duration-200">
          <td class="px-4 py-3 font-medium text-black">{{ (currentPage - 1) * pageSize + i + 1 }}</td>
          <td class="px-4 py-3 text-black">{{ appointment.doctorId }}</td>
          <td class="px-4 py-3 text-black">{{ appointment.appointmentDate | date: 'yyyy-MM-dd' }}</td>
          <td class="px-4 py-3 text-black">{{ appointment.startTime }} - {{ appointment.endTime }}</td>
          <td class="px-4 py-3 text-black">
            <span [ngClass]="{
              'text-green-600': appointment.status === 'Confirmed',
              'text-yellow-600': appointment.status === 'Pending',
              'text-red-600': appointment.status === 'Canceled',
              'text-blue-600': appointment.status === 'Completed'
            }">
              {{ appointment.status }}
            </span>
          </td>
          <td class="px-4 py-3 text-center">
            <button mat-icon-button color="primary" (click)="viewDetails(appointment.id)">
              <mat-icon>visibility</mat-icon>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div> -->

  <!-- Pagination -->
  <div class="flex justify-between items-center mt-4">
    <div class="text-gray-500 text-sm">{{ paginationSummary }}</div>
    <div class="flex justify-end items-center space-x-2">
      <button
        class="px-3 py-1 rounded border border-gray-300 bg-gray-100 hover:bg-gray-200"
        (click)="prevPage()"
        [disabled]="currentPage === 1"
      >
        Prev
      </button>
      <button
        *ngFor="let page of totalPagesArray"
        class="px-3 py-1 rounded border border-gray-300"
        [ngClass]="{ 'bg-blue-500 text-white': currentPage === page, 'bg-gray-100 hover:bg-gray-200': currentPage !== page }"
        (click)="goToPage(page)"
      >
        {{ page }}
      </button>
      <button
        class="px-3 py-1 rounded border border-gray-300 bg-gray-100 hover:bg-gray-200"
        (click)="nextPage()"
        [disabled]="currentPage === totalPages"
      >
        Next
      </button>
    </div>
  </div>

  <!-- Appointment Drawer -->
  <app-add-appointment (appointmentAdded)="onAppointmentAdded($event)"></app-add-appointment>
</div>
